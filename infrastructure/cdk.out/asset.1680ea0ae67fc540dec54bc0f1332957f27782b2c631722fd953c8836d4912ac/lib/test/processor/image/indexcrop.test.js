"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const indexcrop_1 = require("../../../src/processor/image/indexcrop");
const utils_1 = require("./utils");
test('indexcrop action validate', () => {
    const action = new indexcrop_1.IndexCropAction();
    expect(() => {
        action.validate('indexcrop'.split(','));
    }).toThrowError(/IndexCrop param error, e.g: indexcrop,x_100,i_0/);
});
test('indexcrop action validate', () => {
    const action = new indexcrop_1.IndexCropAction();
    const param1 = action.validate('indexcrop,x_100,i_0'.split(','));
    expect(param1).toEqual({
        x: 100,
        i: 0,
        y: 0,
    });
    expect(() => {
        action.validate('indexcrop,x_-10,i_0'.split(','));
    }).toThrowError(/Param error:  x value must be greater than 0/);
    expect(() => {
        action.validate('indexcrop,y_-10,i_0'.split(','));
    }).toThrowError(/Param error:  y value must be greater than 0/);
    expect(() => {
        action.validate('indexcrop,i_10'.split(','));
    }).toThrowError(/IndexCrop param error, e.g: indexcrop,x_100,i_0/);
});
test('indexcrop action validate', () => {
    const action = new indexcrop_1.IndexCropAction();
    expect(() => {
        action.validate('indexcrop,x_10,y_10'.split(','));
    }).toThrowError(/Param error:  Cannot enter x and y at the same time/);
});
test('indexcrop action validate', () => {
    const action = new indexcrop_1.IndexCropAction();
    expect(() => {
        action.validate('indexcrop,y_-10,i_0'.split(','));
    }).toThrowError(/Param error:  y value must be greater than 0/);
});
test('indexcrop action validate', () => {
    const action = new indexcrop_1.IndexCropAction();
    expect(() => {
        action.validate('indexcrop,x_10,i_0,abc'.split(','));
    }).toThrowError(/Unkown param/);
});
test('indexcrop action 01', async () => {
    const ctx = await (0, utils_1.mkctx)('example.jpg');
    const action = new indexcrop_1.IndexCropAction();
    await action.process(ctx, 'indexcrop,x_100,i_0'.split(','));
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(100);
});
test('indexcrop action', async () => {
    const ctx = await (0, utils_1.mkctx)('example.jpg');
    const action = new indexcrop_1.IndexCropAction();
    await action.process(ctx, 'indexcrop,y_100,i_0'.split(','));
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.height).toBe(100);
});
test('indexcrop action', async () => {
    const ctx = await (0, utils_1.mkctx)('example.jpg');
    const action = new indexcrop_1.IndexCropAction();
    await action.process(ctx, 'indexcrop,y_10000,i_0'.split(','));
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.height).toBeGreaterThan(100);
});
test('indexcrop action', async () => {
    const ctx = await (0, utils_1.mkctx)('example.jpg');
    const action = new indexcrop_1.IndexCropAction();
    await action.process(ctx, 'indexcrop,x_10000,i_0'.split(','));
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.height).toBeGreaterThan(100);
});
test('indexcrop action', async () => {
    const ctx = await (0, utils_1.mkctx)('example.jpg');
    const action = new indexcrop_1.IndexCropAction();
    await action.process(ctx, 'indexcrop,x_100,i_100'.split(','));
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.height).toBeGreaterThan(100);
});
test('indexcrop action', async () => {
    const ctx = await (0, utils_1.mkctx)('example.jpg');
    const action = new indexcrop_1.IndexCropAction();
    await action.process(ctx, 'indexcrop,y_100,i_100'.split(','));
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.height).toBeGreaterThan(100);
});
test('indexcrop action', async () => {
    const ctx = await (0, utils_1.mkctx)('example.jpg');
    const action = new indexcrop_1.IndexCropAction();
    await action.process(ctx, 'indexcrop,x_250,i_1'.split(','));
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.height).toBeGreaterThan(100);
});
test('indexcrop action', async () => {
    const ctx = await (0, utils_1.mkctx)('example.jpg');
    const action = new indexcrop_1.IndexCropAction();
    await action.process(ctx, 'indexcrop,y_200,i_1'.split(','));
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.height).toBeGreaterThan(201);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXhjcm9wLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90ZXN0L3Byb2Nlc3Nvci9pbWFnZS9pbmRleGNyb3AudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNFQUF5RTtBQUN6RSxtQ0FBZ0M7QUFHaEMsSUFBSSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtJQUNyQyxNQUFNLE1BQU0sR0FBRyxJQUFJLDJCQUFlLEVBQUUsQ0FBQztJQUNyQyxNQUFNLENBQUMsR0FBRyxFQUFFO1FBQ1YsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDMUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLGlEQUFpRCxDQUFDLENBQUM7QUFDckUsQ0FBQyxDQUFDLENBQUM7QUFHSCxJQUFJLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO0lBQ3JDLE1BQU0sTUFBTSxHQUFHLElBQUksMkJBQWUsRUFBRSxDQUFDO0lBQ3JDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDakUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQztRQUNyQixDQUFDLEVBQUUsR0FBRztRQUNOLENBQUMsRUFBRSxDQUFDO1FBQ0osQ0FBQyxFQUFFLENBQUM7S0FDTCxDQUFDLENBQUM7SUFFSCxNQUFNLENBQUMsR0FBRyxFQUFFO1FBQ1YsTUFBTSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNwRCxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsOENBQThDLENBQUMsQ0FBQztJQUVoRSxNQUFNLENBQUMsR0FBRyxFQUFFO1FBQ1YsTUFBTSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLENB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QUMsR0FBRyxFQUFFLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzVELE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFNLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsaUJBQWlCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUN2RSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMzQyxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLElBQUksRUFBRTtJQUNsQyxNQUFNLEdBQUcsR0FBRyxNQUFNLElBQUEsYUFBSyxFQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sTUFBTSxHQUFHLElBQUksMkJBQWUsRUFBRSxDQUFDO0lBQ3JDLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUscUJBQXFCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDNUQsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxpQkFBaUIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZFLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzNDLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5kZXhDcm9wQWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vc3JjL3Byb2Nlc3Nvci9pbWFnZS9pbmRleGNyb3AnO1xuaW1wb3J0IHsgbWtjdHggfSBmcm9tICcuL3V0aWxzJztcblxuXG50ZXN0KCdpbmRleGNyb3AgYWN0aW9uIHZhbGlkYXRlJywgKCkgPT4ge1xuICBjb25zdCBhY3Rpb24gPSBuZXcgSW5kZXhDcm9wQWN0aW9uKCk7XG4gIGV4cGVjdCgoKSA9PiB7XG4gICAgYWN0aW9uLnZhbGlkYXRlKCdpbmRleGNyb3AnLnNwbGl0KCcsJykpO1xuICB9KS50b1Rocm93RXJyb3IoL0luZGV4Q3JvcCBwYXJhbSBlcnJvciwgZS5nOiBpbmRleGNyb3AseF8xMDAsaV8wLyk7XG59KTtcblxuXG50ZXN0KCdpbmRleGNyb3AgYWN0aW9uIHZhbGlkYXRlJywgKCkgPT4ge1xuICBjb25zdCBhY3Rpb24gPSBuZXcgSW5kZXhDcm9wQWN0aW9uKCk7XG4gIGNvbnN0IHBhcmFtMSA9IGFjdGlvbi52YWxpZGF0ZSgnaW5kZXhjcm9wLHhfMTAwLGlfMCcuc3BsaXQoJywnKSk7XG4gIGV4cGVjdChwYXJhbTEpLnRvRXF1YWwoe1xuICAgIHg6IDEwMCxcbiAgICBpOiAwLFxuICAgIHk6IDAsXG4gIH0pO1xuXG4gIGV4cGVjdCgoKSA9PiB7XG4gICAgYWN0aW9uLnZhbGlkYXRlKCdpbmRleGNyb3AseF8tMTAsaV8wJy5zcGxpdCgnLCcpKTtcbiAgfSkudG9UaHJvd0Vycm9yKC9QYXJhbSBlcnJvcjogIHggdmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMC8pO1xuXG4gIGV4cGVjdCgoKSA9PiB7XG4gICAgYWN0aW9uLnZhbGlkYXRlKCdpbmRleGNyb3AseV8tMTAsaV8wJy5zcGxpdCgnLCcpKTtcbiAgfSkudG9UaHJvd0Vycm9yKC9QYXJhbSBlcnJvcjogIHkgdmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMC8pO1xuXG4gIGV4cGVjdCgoKSA9PiB7XG4gICAgYWN0aW9uLnZhbGlkYXRlKCdpbmRleGNyb3AsaV8xMCcuc3BsaXQoJywnKSk7XG4gIH0pLnRvVGhyb3dFcnJvcigvSW5kZXhDcm9wIHBhcmFtIGVycm9yLCBlLmc6IGluZGV4Y3JvcCx4XzEwMCxpXzAvKTtcblxuXG59KTtcblxudGVzdCgnaW5kZXhjcm9wIGFjdGlvbiB2YWxpZGF0ZScsICgpID0+IHtcbiAgY29uc3QgYWN0aW9uID0gbmV3IEluZGV4Q3JvcEFjdGlvbigpO1xuICBleHBlY3QoKCkgPT4ge1xuICAgIGFjdGlvbi52YWxpZGF0ZSgnaW5kZXhjcm9wLHhfMTAseV8xMCcuc3BsaXQoJywnKSk7XG4gIH0pLnRvVGhyb3dFcnJvcigvUGFyYW0gZXJyb3I6ICBDYW5ub3QgZW50ZXIgeCBhbmQgeSBhdCB0aGUgc2FtZSB0aW1lLyk7XG59KTtcblxudGVzdCgnaW5kZXhjcm9wIGFjdGlvbiB2YWxpZGF0ZScsICgpID0+IHtcbiAgY29uc3QgYWN0aW9uID0gbmV3IEluZGV4Q3JvcEFjdGlvbigpO1xuICBleHBlY3QoKCkgPT4ge1xuICAgIGFjdGlvbi52YWxpZGF0ZSgnaW5kZXhjcm9wLHlfLTEwLGlfMCcuc3BsaXQoJywnKSk7XG4gIH0pLnRvVGhyb3dFcnJvcigvUGFyYW0gZXJyb3I6ICB5IHZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAvKTtcbn0pO1xuXG5cbnRlc3QoJ2luZGV4Y3JvcCBhY3Rpb24gdmFsaWRhdGUnLCAoKSA9PiB7XG4gIGNvbnN0IGFjdGlvbiA9IG5ldyBJbmRleENyb3BBY3Rpb24oKTtcbiAgZXhwZWN0KCgpID0+IHtcbiAgICBhY3Rpb24udmFsaWRhdGUoJ2luZGV4Y3JvcCx4XzEwLGlfMCxhYmMnLnNwbGl0KCcsJykpO1xuICB9KS50b1Rocm93RXJyb3IoL1Vua293biBwYXJhbS8pO1xufSk7XG5cblxudGVzdCgnaW5kZXhjcm9wIGFjdGlvbiAwMScsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgY3R4ID0gYXdhaXQgbWtjdHgoJ2V4YW1wbGUuanBnJyk7XG4gIGNvbnN0IGFjdGlvbiA9IG5ldyBJbmRleENyb3BBY3Rpb24oKTtcbiAgYXdhaXQgYWN0aW9uLnByb2Nlc3MoY3R4LCAnaW5kZXhjcm9wLHhfMTAwLGlfMCcuc3BsaXQoJywnKSk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG4gIGV4cGVjdChpbmZvLndpZHRoKS50b0JlKDEwMCk7XG59KTtcblxuXG50ZXN0KCdpbmRleGNyb3AgYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBta2N0eCgnZXhhbXBsZS5qcGcnKTtcbiAgY29uc3QgYWN0aW9uID0gbmV3IEluZGV4Q3JvcEFjdGlvbigpO1xuICBhd2FpdCBhY3Rpb24ucHJvY2VzcyhjdHgsICdpbmRleGNyb3AseV8xMDAsaV8wJy5zcGxpdCgnLCcpKTtcbiAgY29uc3QgeyBpbmZvIH0gPSBhd2FpdCBjdHguaW1hZ2UudG9CdWZmZXIoeyByZXNvbHZlV2l0aE9iamVjdDogdHJ1ZSB9KTtcbiAgZXhwZWN0KGluZm8uaGVpZ2h0KS50b0JlKDEwMCk7XG59KTtcblxuXG50ZXN0KCdpbmRleGNyb3AgYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBta2N0eCgnZXhhbXBsZS5qcGcnKTtcbiAgY29uc3QgYWN0aW9uID0gbmV3IEluZGV4Q3JvcEFjdGlvbigpO1xuICBhd2FpdCBhY3Rpb24ucHJvY2VzcyhjdHgsICdpbmRleGNyb3AseV8xMDAwMCxpXzAnLnNwbGl0KCcsJykpO1xuICBjb25zdCB7IGluZm8gfSA9IGF3YWl0IGN0eC5pbWFnZS50b0J1ZmZlcih7IHJlc29sdmVXaXRoT2JqZWN0OiB0cnVlIH0pO1xuICBleHBlY3QoaW5mby5oZWlnaHQpLnRvQmVHcmVhdGVyVGhhbigxMDApO1xufSk7XG5cbnRlc3QoJ2luZGV4Y3JvcCBhY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGN0eCA9IGF3YWl0IG1rY3R4KCdleGFtcGxlLmpwZycpO1xuICBjb25zdCBhY3Rpb24gPSBuZXcgSW5kZXhDcm9wQWN0aW9uKCk7XG4gIGF3YWl0IGFjdGlvbi5wcm9jZXNzKGN0eCwgJ2luZGV4Y3JvcCx4XzEwMDAwLGlfMCcuc3BsaXQoJywnKSk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG4gIGV4cGVjdChpbmZvLmhlaWdodCkudG9CZUdyZWF0ZXJUaGFuKDEwMCk7XG59KTtcblxudGVzdCgnaW5kZXhjcm9wIGFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgY3R4ID0gYXdhaXQgbWtjdHgoJ2V4YW1wbGUuanBnJyk7XG4gIGNvbnN0IGFjdGlvbiA9IG5ldyBJbmRleENyb3BBY3Rpb24oKTtcbiAgYXdhaXQgYWN0aW9uLnByb2Nlc3MoY3R4LCAnaW5kZXhjcm9wLHhfMTAwLGlfMTAwJy5zcGxpdCgnLCcpKTtcbiAgY29uc3QgeyBpbmZvIH0gPSBhd2FpdCBjdHguaW1hZ2UudG9CdWZmZXIoeyByZXNvbHZlV2l0aE9iamVjdDogdHJ1ZSB9KTtcbiAgZXhwZWN0KGluZm8uaGVpZ2h0KS50b0JlR3JlYXRlclRoYW4oMTAwKTtcbn0pO1xuXG5cbnRlc3QoJ2luZGV4Y3JvcCBhY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGN0eCA9IGF3YWl0IG1rY3R4KCdleGFtcGxlLmpwZycpO1xuICBjb25zdCBhY3Rpb24gPSBuZXcgSW5kZXhDcm9wQWN0aW9uKCk7XG4gIGF3YWl0IGFjdGlvbi5wcm9jZXNzKGN0eCwgJ2luZGV4Y3JvcCx5XzEwMCxpXzEwMCcuc3BsaXQoJywnKSk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG4gIGV4cGVjdChpbmZvLmhlaWdodCkudG9CZUdyZWF0ZXJUaGFuKDEwMCk7XG59KTtcblxudGVzdCgnaW5kZXhjcm9wIGFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgY3R4ID0gYXdhaXQgbWtjdHgoJ2V4YW1wbGUuanBnJyk7XG4gIGNvbnN0IGFjdGlvbiA9IG5ldyBJbmRleENyb3BBY3Rpb24oKTtcbiAgYXdhaXQgYWN0aW9uLnByb2Nlc3MoY3R4LCAnaW5kZXhjcm9wLHhfMjUwLGlfMScuc3BsaXQoJywnKSk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG4gIGV4cGVjdChpbmZvLmhlaWdodCkudG9CZUdyZWF0ZXJUaGFuKDEwMCk7XG59KTtcblxudGVzdCgnaW5kZXhjcm9wIGFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgY3R4ID0gYXdhaXQgbWtjdHgoJ2V4YW1wbGUuanBnJyk7XG4gIGNvbnN0IGFjdGlvbiA9IG5ldyBJbmRleENyb3BBY3Rpb24oKTtcbiAgYXdhaXQgYWN0aW9uLnByb2Nlc3MoY3R4LCAnaW5kZXhjcm9wLHlfMjAwLGlfMScuc3BsaXQoJywnKSk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG4gIGV4cGVjdChpbmZvLmhlaWdodCkudG9CZUdyZWF0ZXJUaGFuKDIwMSk7XG59KTsiXX0=