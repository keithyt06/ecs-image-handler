{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"ecs-image-handler-stack":{"id":"ecs-image-handler-stack","path":"ecs-image-handler-stack","children":{"ECSImageHandler":{"id":"ECSImageHandler","path":"ecs-image-handler-stack/ECSImageHandler","children":{"ForwardAllQueryString":{"id":"ForwardAllQueryString","path":"ecs-image-handler-stack/ECSImageHandler/ForwardAllQueryString","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/ForwardAllQueryString/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginRequestPolicy","aws:cdk:cloudformation:props":{"originRequestPolicyConfig":{"name":{"Fn::Join":["",["ecs-image-handler-stack-",{"Ref":"AWS::Region"},"-FwdAllQS"]]},"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"whitelist","headers":["x-bucket"]},"queryStringsConfig":{"queryStringBehavior":"all"}}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginRequestPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginRequestPolicy","version":"2.192.0","metadata":[]}},"CacheAllQueryString":{"id":"CacheAllQueryString","path":"ecs-image-handler-stack/ECSImageHandler/CacheAllQueryString","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/CacheAllQueryString/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":{"Fn::Join":["",["ecs-image-handler-stack-",{"Ref":"AWS::Region"},"-CacheAllQS"]]},"minTtl":0,"maxTtl":31536000,"defaultTtl":86400,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":false,"enableAcceptEncodingBrotli":false,"queryStringsConfig":{"queryStringBehavior":"all"}}}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.192.0","metadata":[]}},"ImageBucket0":{"id":"ImageBucket0","path":"ecs-image-handler-stack/ECSImageHandler/ImageBucket0","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.192.0","metadata":[]}},"ImageBucket1":{"id":"ImageBucket1","path":"ecs-image-handler-stack/ECSImageHandler/ImageBucket1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.192.0","metadata":[]}},"StyleTable":{"id":"StyleTable","path":"ecs-image-handler-stack/ECSImageHandler/StyleTable","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/StyleTable/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.192.0"}},"ScalingRole":{"id":"ScalingRole","path":"ecs-image-handler-stack/ECSImageHandler/StyleTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.192.0","metadata":[]}},"StyleConfig":{"id":"StyleConfig","path":"ecs-image-handler-stack/ECSImageHandler/StyleConfig","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"ConfigJsonParameter.Parameter":{"id":"ConfigJsonParameter.Parameter","path":"ecs-image-handler-stack/ECSImageHandler/ConfigJsonParameter.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.192.0"}},"ConfigJsonParameter":{"id":"ConfigJsonParameter","path":"ecs-image-handler-stack/ECSImageHandler/ConfigJsonParameter","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"Vpc":{"id":"Vpc","path":"ecs-image-handler-stack/ECSImageHandler/Vpc","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.192.0"}},"publicSubnet1":{"id":"publicSubnet1","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1","children":{"Subnet":{"id":"Subnet","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2a","cidrBlock":"10.0.0.0/19","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ECSImageHandlerVpcpublicSubnet1RouteTable0872CA06"},"subnetId":{"Ref":"ECSImageHandlerVpcpublicSubnet1Subnet2315ECBE"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"ECSImageHandlerVpcIGW38856E0B"},"routeTableId":{"Ref":"ECSImageHandlerVpcpublicSubnet1RouteTable0872CA06"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}},"EIP":{"id":"EIP","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.192.0"}},"NATGateway":{"id":"NATGateway","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["ECSImageHandlerVpcpublicSubnet1EIP83985430","AllocationId"]},"subnetId":{"Ref":"ECSImageHandlerVpcpublicSubnet1Subnet2315ECBE"},"tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.192.0","metadata":[]}},"publicSubnet2":{"id":"publicSubnet2","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet2","children":{"Subnet":{"id":"Subnet","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2b","cidrBlock":"10.0.32.0/19","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet2"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet2"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ECSImageHandlerVpcpublicSubnet2RouteTable72FC1AB9"},"subnetId":{"Ref":"ECSImageHandlerVpcpublicSubnet2SubnetE5B48832"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"ECSImageHandlerVpcIGW38856E0B"},"routeTableId":{"Ref":"ECSImageHandlerVpcpublicSubnet2RouteTable72FC1AB9"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.192.0","metadata":[]}},"publicSubnet3":{"id":"publicSubnet3","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet3","children":{"Subnet":{"id":"Subnet","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet3/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2c","cidrBlock":"10.0.64.0/19","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet3"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet3/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet3/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet3"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet3/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ECSImageHandlerVpcpublicSubnet3RouteTable2AF72AF1"},"subnetId":{"Ref":"ECSImageHandlerVpcpublicSubnet3Subnet6D52BC5E"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/publicSubnet3/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"ECSImageHandlerVpcIGW38856E0B"},"routeTableId":{"Ref":"ECSImageHandlerVpcpublicSubnet3RouteTable2AF72AF1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.192.0","metadata":[]}},"privateSubnet1":{"id":"privateSubnet1","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet1","children":{"Subnet":{"id":"Subnet","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2a","cidrBlock":"10.0.96.0/19","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet1"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet1"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ECSImageHandlerVpcprivateSubnet1RouteTable84AD569C"},"subnetId":{"Ref":"ECSImageHandlerVpcprivateSubnet1SubnetD8242D8A"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"ECSImageHandlerVpcpublicSubnet1NATGatewayA367AE55"},"routeTableId":{"Ref":"ECSImageHandlerVpcprivateSubnet1RouteTable84AD569C"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.192.0","metadata":[]}},"privateSubnet2":{"id":"privateSubnet2","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet2","children":{"Subnet":{"id":"Subnet","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2b","cidrBlock":"10.0.128.0/19","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet2"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet2"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ECSImageHandlerVpcprivateSubnet2RouteTableBE68C64C"},"subnetId":{"Ref":"ECSImageHandlerVpcprivateSubnet2Subnet3E2C0ABF"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"ECSImageHandlerVpcpublicSubnet1NATGatewayA367AE55"},"routeTableId":{"Ref":"ECSImageHandlerVpcprivateSubnet2RouteTableBE68C64C"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.192.0","metadata":[]}},"privateSubnet3":{"id":"privateSubnet3","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet3","children":{"Subnet":{"id":"Subnet","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet3/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2c","cidrBlock":"10.0.160.0/19","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet3"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet3/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet3/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet3"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet3/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ECSImageHandlerVpcprivateSubnet3RouteTable400599B2"},"subnetId":{"Ref":"ECSImageHandlerVpcprivateSubnet3SubnetC3219F07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/privateSubnet3/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"ECSImageHandlerVpcpublicSubnet1NATGatewayA367AE55"},"routeTableId":{"Ref":"ECSImageHandlerVpcprivateSubnet3RouteTable400599B2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.192.0","metadata":[]}},"IGW":{"id":"IGW","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/IGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ecs-image-handler-stack/ECSImageHandler/Vpc"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.192.0"}},"VPCGW":{"id":"VPCGW","path":"ecs-image-handler-stack/ECSImageHandler/Vpc/VPCGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"ECSImageHandlerVpcIGW38856E0B"},"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.192.0","metadata":[]}},"Service":{"id":"Service","path":"ecs-image-handler-stack/ECSImageHandler/Service","children":{"LB":{"id":"LB","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["ECSImageHandlerServiceLBSecurityGroup2BC4AAE4","GroupId"]}],"subnets":[{"Ref":"ECSImageHandlerVpcpublicSubnet1Subnet2315ECBE"},{"Ref":"ECSImageHandlerVpcpublicSubnet2SubnetE5B48832"},{"Ref":"ECSImageHandlerVpcpublicSubnet3Subnet6D52BC5E"}],"type":"application"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.192.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB/SecurityGroup","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB ecsimagehandlerstackECSImageHandlerServiceLB4556A754","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.192.0"}},"to ecsimagehandlerstackECSImageHandlerServiceSecurityGroup6EA2E5D7:8080":{"id":"to ecsimagehandlerstackECSImageHandlerServiceSecurityGroup6EA2E5D7:8080","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB/SecurityGroup/to ecsimagehandlerstackECSImageHandlerServiceSecurityGroup6EA2E5D7:8080","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["ECSImageHandlerServiceSecurityGroup72A0C666","GroupId"]},"fromPort":8080,"groupId":{"Fn::GetAtt":["ECSImageHandlerServiceLBSecurityGroup2BC4AAE4","GroupId"]},"ipProtocol":"tcp","toPort":8080}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.192.0","metadata":[]}},"PublicListener":{"id":"PublicListener","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB/PublicListener","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB/PublicListener/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"ECSImageHandlerServiceLBPublicListenerECSGroupC3A7DBC4"}}],"loadBalancerArn":{"Ref":"ECSImageHandlerServiceLB30AE0217"},"port":80,"protocol":"HTTP"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.192.0"}},"ECSGroup":{"id":"ECSGroup","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB/PublicListener/ECSGroup","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/LB/PublicListener/ECSGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":60,"healthCheckPath":"/ping","healthCheckTimeoutSeconds":10,"healthyThresholdCount":3,"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.192.0","metadata":[]}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"ecs-image-handler-stack/ECSImageHandler/Service/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"ServiceURL":{"id":"ServiceURL","path":"ecs-image-handler-stack/ECSImageHandler/Service/ServiceURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"TaskDef":{"id":"TaskDef","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef","children":{"TaskRole":{"id":"TaskRole","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.192.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/TaskRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/TaskRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ECSImageHandlerStyleTable1A843F83","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["ssm:DescribeParameters","ssm:GetParameter","ssm:GetParameterHistory","ssm:GetParameters"],"Effect":"Allow","Resource":"arn:aws:ssm:us-west-2:057313215210:parameter/ecs-image-handler/config"},{"Action":["s3:Abort*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject*"],"Effect":"Allow","Resource":["arn:aws:s3:::new-uw2-img","arn:aws:s3:::new-uw2-img/*","arn:aws:s3:::new-uw2-img2","arn:aws:s3:::new-uw2-img2/*"]}],"Version":"2012-10-17"},"policyName":"ECSImageHandlerServiceTaskDefTaskRoleDefaultPolicy35F33B9D","roles":[{"Ref":"ECSImageHandlerServiceTaskDefTaskRole09FC97AB"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.192.0","metadata":[]}},"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Sub":"057313215210.dkr.ecr.us-west-2.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-057313215210-us-west-2:3fb194a0eb37cedb6720ad5adb808ed5b3edc63d6bfd17ff612b6f929988610b"},"name":"web","portMappings":[{"containerPort":8080,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"ECSImageHandlerServiceTaskDefwebLogGroupC8F5A8F4"},"awslogs-stream-prefix":"ecs-image-handler","awslogs-region":"us-west-2"}},"environment":[{"name":"REGION","value":{"Ref":"AWS::Region"}},{"name":"AWS_REGION","value":{"Ref":"AWS::Region"}},{"name":"VIPS_DISC_THRESHOLD","value":"600m"},{"name":"SRC_BUCKET","value":"new-uw2-img"},{"name":"STYLE_TABLE_NAME","value":{"Ref":"ECSImageHandlerStyleTable1A843F83"}},{"name":"SECRET_NAME","value":""},{"name":"CONFIG_JSON_PARAMETER_NAME","value":"/ecs-image-handler/config"},{"name":"AWS_SDK_LOAD_CONFIG","value":"1"},{"name":"SRC_BUCKETS","value":"new-uw2-img,new-uw2-img2"}]}],"cpu":"4096","executionRoleArn":{"Fn::GetAtt":["ECSImageHandlerServiceTaskDefExecutionRole61C3F86E","Arn"]},"family":"ecsimagehandlerstackECSImageHandlerServiceTaskDef0E0DD3A3","memory":"8192","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["ECSImageHandlerServiceTaskDefTaskRole09FC97AB","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.192.0"}},"web":{"id":"web","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/web","children":{"AssetImage":{"id":"AssetImage","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/web/AssetImage","children":{"Staging":{"id":"Staging","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/web/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.192.0"}},"Repository":{"id":"Repository","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/web/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.192.0"}},"LogGroup":{"id":"LogGroup","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/web/LogGroup","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/web/LogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":7}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.192.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.192.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/TaskDef/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"arn:aws:ecr:us-west-2:057313215210:repository/cdk-hnb659fds-container-assets-057313215210-us-west-2"},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ECSImageHandlerServiceTaskDefwebLogGroupC8F5A8F4","Arn"]}}],"Version":"2012-10-17"},"policyName":"ECSImageHandlerServiceTaskDefExecutionRoleDefaultPolicy647F0F9C","roles":[{"Ref":"ECSImageHandlerServiceTaskDefExecutionRole61C3F86E"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.192.0","metadata":[]}},"Service":{"id":"Service","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service","children":{"Service":{"id":"Service","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"EcsDefaultClusterMnL3mNNYNVpc18E0451A"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":100,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":2,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"ECSImageHandlerServiceLBPublicListenerECSGroupC3A7DBC4"},"containerName":"web","containerPort":8080}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"ECSImageHandlerVpcprivateSubnet1SubnetD8242D8A"},{"Ref":"ECSImageHandlerVpcprivateSubnet2Subnet3E2C0ABF"},{"Ref":"ECSImageHandlerVpcprivateSubnet3SubnetC3219F07"}],"securityGroups":[{"Fn::GetAtt":["ECSImageHandlerServiceSecurityGroup72A0C666","GroupId"]}]}},"taskDefinition":{"Ref":"ECSImageHandlerServiceTaskDef715EE3F9"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.192.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/SecurityGroup","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"ecs-image-handler-stack/ECSImageHandler/Service/Service/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"ECSImageHandlerVpcF49FCD07"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.192.0"}},"from ecsimagehandlerstackECSImageHandlerServiceLBSecurityGroup4232415F:8080":{"id":"from ecsimagehandlerstackECSImageHandlerServiceLBSecurityGroup4232415F:8080","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/SecurityGroup/from ecsimagehandlerstackECSImageHandlerServiceLBSecurityGroup4232415F:8080","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":8080,"groupId":{"Fn::GetAtt":["ECSImageHandlerServiceSecurityGroup72A0C666","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ECSImageHandlerServiceLBSecurityGroup2BC4AAE4","GroupId"]},"toPort":8080}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.192.0","metadata":[]}},"ScalingRole":{"id":"ScalingRole","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"TaskCount":{"id":"TaskCount","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/TaskCount","children":{"Target":{"id":"Target","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/TaskCount/Target","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/TaskCount/Target/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":20,"minCapacity":2,"resourceId":{"Fn::Join":["",["service/",{"Ref":"EcsDefaultClusterMnL3mNNYNVpc18E0451A"},"/",{"Fn::GetAtt":["ECSImageHandlerServiceED439CBB","Name"]}]]},"roleArn":"arn:aws:iam::057313215210:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.192.0"}},"CpuScaling":{"id":"CpuScaling","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/TaskCount/Target/CpuScaling","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Service/Service/TaskCount/Target/CpuScaling/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"ecsimagehandlerstackECSImageHandlerServiceTaskCountTargetCpuScalingD176B041","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"ECSImageHandlerServiceTaskCountTarget96465C67"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageCPUUtilization"},"scaleInCooldown":60,"scaleOutCooldown":30,"targetValue":60}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs_patterns.ApplicationLoadBalancedFargateService","version":"2.192.0"}},"S3Origin0":{"id":"S3Origin0","path":"ecs-image-handler-stack/ECSImageHandler/S3Origin0","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/S3Origin0/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for s3://new-uw2-img"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.192.0","metadata":[]}},"S3Origin1":{"id":"S3Origin1","path":"ecs-image-handler-stack/ECSImageHandler/S3Origin1","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/S3Origin1/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for s3://new-uw2-img2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.192.0","metadata":[]}},"Distribution":{"id":"Distribution","path":"ecs-image-handler-stack/ECSImageHandler/Distribution","children":{"Origin1":{"id":"Origin1","path":"ecs-image-handler-stack/ECSImageHandler/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"OriginGroup1":{"id":"OriginGroup1","path":"ecs-image-handler-stack/ECSImageHandler/Distribution/OriginGroup1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"ecs-image-handler-stack/ECSImageHandler/Distribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"ecs-image-handler-stack/ECSImageHandler/Distribution/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["ECSImageHandlerServiceLB30AE0217","DNSName"]},"id":"ecsimagehandlerstackECSImageHandlerDistributionOrigin1DBD4585B","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only"}},{"domainName":"new-uw2-img.s3.us-west-2.amazonaws.com","id":"ecsimagehandlerstackECSImageHandlerDistributionOrigin280422A18","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"ECSImageHandlerS3Origin03EE7ADCC"}]]}}}],"originGroups":{"items":[{"failoverCriteria":{"statusCodes":{"items":[403],"quantity":1}},"id":"ecsimagehandlerstackECSImageHandlerDistributionOriginGroup1B1368D23","members":{"items":[{"originId":"ecsimagehandlerstackECSImageHandlerDistributionOrigin1DBD4585B"},{"originId":"ecsimagehandlerstackECSImageHandlerDistributionOrigin280422A18"}],"quantity":2}}],"quantity":1},"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"ecsimagehandlerstackECSImageHandlerDistributionOriginGroup1B1368D23","cachePolicyId":{"Ref":"ECSImageHandlerCacheAllQueryString68F3BD68"},"compress":true,"originRequestPolicyId":{"Ref":"ECSImageHandlerForwardAllQueryString51587837"},"viewerProtocolPolicy":"redirect-to-https"},"comment":"ecs-image-handler-stack distribution","customErrorResponses":[{"errorCachingMinTtl":10,"errorCode":500},{"errorCachingMinTtl":10,"errorCode":501},{"errorCachingMinTtl":10,"errorCode":502},{"errorCachingMinTtl":10,"errorCode":503},{"errorCachingMinTtl":10,"errorCode":504}],"httpVersion":"http2","ipv6Enabled":true}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.192.0","metadata":[]}},"DistributionUrl":{"id":"DistributionUrl","path":"ecs-image-handler-stack/ECSImageHandler/DistributionUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"EcsDefaultClusterMnL3mNNYNVpc":{"id":"EcsDefaultClusterMnL3mNNYNVpc","path":"ecs-image-handler-stack/EcsDefaultClusterMnL3mNNYNVpc","children":{"Resource":{"id":"Resource","path":"ecs-image-handler-stack/EcsDefaultClusterMnL3mNNYNVpc/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.192.0","metadata":[]}},"CDKMetadata":{"id":"CDKMetadata","path":"ecs-image-handler-stack/CDKMetadata","children":{"Default":{"id":"Default","path":"ecs-image-handler-stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ecs-image-handler-stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.192.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ecs-image-handler-stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.192.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.192.0"}}}