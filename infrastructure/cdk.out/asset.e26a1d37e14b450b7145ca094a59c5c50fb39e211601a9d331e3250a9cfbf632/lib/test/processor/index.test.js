"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const sharp = require("sharp");
const processor_1 = require("../../src/processor");
const image_1 = require("../../src/processor/image");
const _base_1 = require("../../src/processor/image/_base");
const resize_1 = require("../../src/processor/image/resize");
const style_1 = require("../../src/processor/style");
const video_1 = require("../../src/processor/video");
const store_1 = require("../../src/store");
const utils_1 = require("./image/utils");
test('image processor singleton', () => {
    const p1 = image_1.ImageProcessor.getInstance();
    const p2 = image_1.ImageProcessor.getInstance();
    expect(p1).toBe(p2);
});
test('processor register', () => {
    class MyResizeAction extends resize_1.ResizeAction {
        constructor() {
            super(...arguments);
            this.name = 'my-resize';
        }
    }
    const p = image_1.ImageProcessor.getInstance();
    const resizeAction = new MyResizeAction();
    p.register(resizeAction);
    expect(resizeAction.name).toBe('my-resize');
    expect(p.action('my-resize') === resizeAction).toBeTruthy();
});
test('image processor test', async () => {
    const bs = new store_1.SharpBufferStore(sharp({
        create: {
            width: 50,
            height: 50,
            channels: 3,
            background: { r: 255, g: 0, b: 0 },
        },
    }).png());
    const ctx = await (0, utils_1.mkctx)('', 'image/resize,w_100,h_100,m_fixed,limit_0/'.split('/'), bs);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(100);
    expect(info.height).toBe(100);
});
test('image/crop,w_100,h_100/rounded-corners,r_10/format,png', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/crop,w_100,h_100/rounded-corners,r_10/format,png'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(100);
    expect(info.height).toBe(100);
    expect(info.channels).toBe(4);
});
test('image/resize,w_100/rounded-corners,r_10/format,png', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/resize,w_100/rounded-corners,r_10/format,png'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.channels).toBe(4);
});
test('image/resize,w_50/crop,w_100,h_100/rounded-corners,r_100/format,png', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/resize,w_50/crop,w_100,h_100/rounded-corners,r_100/format,png'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(50);
    expect(info.height).toBe(33);
    expect(info.channels).toBe(4);
});
test('example.jpg?x-oss-process=image/resize,w_50/threshold,10', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/resize,w_50/threshold,10'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(50);
    expect(info.height).toBe(33);
    expect(info.channels).toBe(3);
});
test('example.jpg?x-oss-process=image/resize,w_50/threshold,23000', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/resize,w_50/threshold,23000'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(400);
    expect(info.height).toBe(267);
    expect(info.channels).toBe(3);
});
test('image/resize,w_20/indexcrop,x_50,i_0/', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/resize,w_20/indexcrop,x_50,i_0/'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(20);
});
test('example.gif?x-oss-process=image/format,jpg', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.gif', 'image/format,jpg'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(500);
    expect(info.height).toBe(300);
    expect(info.channels).toBe(3);
});
test('example.jpg?x-oss-process=image/resize,w_200/rotate,90', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/resize,w_200/rotate,90'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.width).toBe(134);
    expect(info.height).toBe(200);
    expect(info.channels).toBe(3);
});
test('example.gif?x-oss-process=image/format,png', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.gif', 'image/format,png'.split('/'), utils_1.fixtureStore);
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(ctx.features[processor_1.Features.ReadAllAnimatedFrames]).toBe(false);
    expect(info.width).toBe(500);
    expect(info.height).toBe(300);
    expect(info.format).toBe('png');
});
test('autowebp: example.jpg', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', [], utils_1.fixtureStore);
    ctx.features[processor_1.Features.AutoWebp] = true;
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.format).toBe('webp');
});
test('autowebp: example.jpg?x-oss-process=image/format,png', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/format,png'.split('/'), utils_1.fixtureStore);
    ctx.features[processor_1.Features.AutoWebp] = true;
    await image_1.ImageProcessor.getInstance().process(ctx);
    const { info } = await ctx.image.toBuffer({ resolveWithObject: true });
    expect(info.format).toBe('png');
});
test.skip('example.jpg?x-oss-process=video/snapshot,t_1,f_jpg,m_fast', async () => {
    const ctx = await video_1.VideoProcessor.getInstance().newContext('example-video.mp4', 'video/snapshot,t_1,f_jpg,m_fast'.split('/'), utils_1.fixtureStore);
    const { data, type } = await video_1.VideoProcessor.getInstance().process(ctx);
    const metadata = await sharp(data).metadata();
    expect(type).toBe('image/image/jpeg');
    expect(metadata.format).toBe('jpeg');
});
test('example.jpg?x-oss-process=image/fake/info', async () => {
    const mockValidate = jest.fn();
    const mockProcess = jest.fn();
    class FakeAction extends _base_1.BaseImageAction {
        constructor() {
            super(...arguments);
            this.name = 'fake';
        }
        validate(params) {
            return mockValidate(params);
        }
        process(ctx, params) {
            return Promise.resolve(mockProcess(ctx, params));
        }
    }
    image_1.ImageProcessor.getInstance().register(new FakeAction());
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.jpg', 'image/fake/info'.split('/'), utils_1.fixtureStore);
    const { data, type } = await image_1.ImageProcessor.getInstance().process(ctx);
    expect(type).toBe('application/json');
    expect(data).toEqual({
        FileSize: { value: '21839' },
        Format: { value: 'jpg' },
        ImageHeight: { value: '267' },
        ImageWidth: { value: '400' },
    });
    expect(mockProcess).not.toBeCalled();
});
test('style processor test', async () => {
    const styleStore = new store_1.MemKVStore({
        style1: { id: 'style1', style: 'image/resize,w_100,h_100,m_fixed,limit_0/' },
    });
    const p = style_1.StyleProcessor.getInstance(styleStore);
    const ctx = await p.newContext('example.jpg', 'style/style1'.split('/'), utils_1.fixtureStore);
    const { data } = await p.process(ctx);
    const metadata = await sharp(data).metadata();
    expect(metadata.width).toBe(100);
    expect(metadata.height).toBe(100);
});
test('style processor test invalid style name', async () => {
    const bs = new store_1.SharpBufferStore(sharp({
        create: {
            width: 50,
            height: 50,
            channels: 3,
            background: { r: 255, g: 0, b: 0 },
        },
    }).png());
    const ctx = await (0, utils_1.mkctx)('', 'style/ #$ '.split('/'), bs);
    const styleStore = new store_1.MemKVStore({
        style1: { id: 'style1', style: 'image/resize,w_100,h_100,m_fixed,limit_0/' },
    });
    void expect(style_1.StyleProcessor.getInstance(styleStore).process(ctx))
        .rejects.toThrowError(/Invalid style name/);
});
test('style processor not found', async () => {
    const bs = new store_1.SharpBufferStore(sharp({
        create: {
            width: 50,
            height: 50,
            channels: 3,
            background: { r: 255, g: 0, b: 0 },
        },
    }).png());
    const ctx = await (0, utils_1.mkctx)('', 'style/notfound'.split('/'), bs);
    const styleStore = new store_1.MemKVStore({
        style1: { id: 'style1', style: 'image/resize,w_100,h_100,m_fixed,limit_0/' },
    });
    void expect(style_1.StyleProcessor.getInstance(styleStore).process(ctx))
        .rejects.toThrowError(/Style not found/);
});
test('f.jpg?x-oss-process=image/resize,w_100/', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('f.jpg', 'image/resize,w_100/'.split('/'), utils_1.fixtureStore);
    const { data, type } = await image_1.ImageProcessor.getInstance().process(ctx);
    const metadata = await sharp(data).metadata();
    expect(type).toBe('image/jpeg');
    expect(metadata.width).toBe(100);
    expect(metadata.height).toBe(127);
});
test('f.jpg?x-oss-process=image/resize,w_100/auto-orient,0', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('f.jpg', 'image/resize,w_100/auto-orient,0'.split('/'), utils_1.fixtureStore);
    const { data, type } = await image_1.ImageProcessor.getInstance().process(ctx);
    const metadata = await sharp(data).metadata();
    expect(type).toBe('image/jpeg');
    expect(metadata.width).toBe(100);
    expect(metadata.height).toBe(78);
    expect(ctx.headers['Last-Modified']).toBe('Wed, 21 Oct 2014 07:28:00 GMT');
});
test('f.jpg?x-oss-process=image/strip-metadata', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('f.jpg', 'image/strip-metadata'.split('/'), utils_1.fixtureStore);
    const { data } = await image_1.ImageProcessor.getInstance().process(ctx);
    const metadata = await sharp(data).metadata();
    expect(ctx.metadata.exif).not.toBeUndefined();
    expect(metadata.exif).toBeUndefined();
});
test('f.jpg?x-oss-process=image/resize,w_100/auto-orient,1', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('f.jpg', 'image/resize,w_100/auto-orient,1'.split('/'), utils_1.fixtureStore);
    const { data, type } = await image_1.ImageProcessor.getInstance().process(ctx);
    const metadata = await sharp(data).metadata();
    expect(type).toBe('image/jpeg');
    expect(metadata.width).toBe(100);
    expect(metadata.height).toBe(128);
});
test('example.gif?x-oss-process=image/cgif,s_2', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.gif', 'image/cgif,s_2'.split('/'), utils_1.fixtureStore);
    const { data } = await image_1.ImageProcessor.getInstance().process(ctx);
    const metadata = await sharp(data).metadata();
    expect(metadata.pages).toBe(2);
});
test('example.gif?x-oss-process=image/cgif,s_100', async () => {
    const ctx = await image_1.ImageProcessor.getInstance().newContext('example.gif', 'image/cgif,s_100'.split('/'), utils_1.fixtureStore);
    const { data } = await image_1.ImageProcessor.getInstance().process(ctx);
    const metadata = await sharp(data).metadata();
    expect(metadata.pages).toBe(3);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Rlc3QvcHJvY2Vzc29yL2luZGV4LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBK0I7QUFDL0IsbURBQXVGO0FBQ3ZGLHFEQUEyRDtBQUMzRCwyREFBa0U7QUFDbEUsNkRBQWdFO0FBQ2hFLHFEQUEyRDtBQUMzRCxxREFBMkQ7QUFDM0QsMkNBQStEO0FBQy9ELHlDQUFvRDtBQUdwRCxJQUFJLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO0lBQ3JDLE1BQU0sRUFBRSxHQUFHLHNCQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDeEMsTUFBTSxFQUFFLEdBQUcsc0JBQWMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUV4QyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3RCLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUM5QixNQUFNLGNBQWUsU0FBUSxxQkFBWTtRQUF6Qzs7WUFDa0IsU0FBSSxHQUFXLFdBQVcsQ0FBQztRQUM3QyxDQUFDO0tBQUE7SUFDRCxNQUFNLENBQUMsR0FBRyxzQkFBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3ZDLE1BQU0sWUFBWSxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7SUFFMUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUV6QixNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM1QyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxZQUFZLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUM5RCxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyxzQkFBc0IsRUFBRSxLQUFLLElBQUks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RyxNQUFNLHNCQUFjLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pFLE1BQU0sUUFBUSxHQUFHLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzlDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pDLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgc2hhcnAgZnJvbSAnc2hhcnAnO1xuaW1wb3J0IHsgRmVhdHVyZXMsIElBY3Rpb25PcHRzLCBJUHJvY2Vzc0NvbnRleHQsIFJlYWRPbmx5IH0gZnJvbSAnLi4vLi4vc3JjL3Byb2Nlc3Nvcic7XG5pbXBvcnQgeyBJbWFnZVByb2Nlc3NvciB9IGZyb20gJy4uLy4uL3NyYy9wcm9jZXNzb3IvaW1hZ2UnO1xuaW1wb3J0IHsgQmFzZUltYWdlQWN0aW9uIH0gZnJvbSAnLi4vLi4vc3JjL3Byb2Nlc3Nvci9pbWFnZS9fYmFzZSc7XG5pbXBvcnQgeyBSZXNpemVBY3Rpb24gfSBmcm9tICcuLi8uLi9zcmMvcHJvY2Vzc29yL2ltYWdlL3Jlc2l6ZSc7XG5pbXBvcnQgeyBTdHlsZVByb2Nlc3NvciB9IGZyb20gJy4uLy4uL3NyYy9wcm9jZXNzb3Ivc3R5bGUnO1xuaW1wb3J0IHsgVmlkZW9Qcm9jZXNzb3IgfSBmcm9tICcuLi8uLi9zcmMvcHJvY2Vzc29yL3ZpZGVvJztcbmltcG9ydCB7IE1lbUtWU3RvcmUsIFNoYXJwQnVmZmVyU3RvcmUgfSBmcm9tICcuLi8uLi9zcmMvc3RvcmUnO1xuaW1wb3J0IHsgZml4dHVyZVN0b3JlLCBta2N0eCB9IGZyb20gJy4vaW1hZ2UvdXRpbHMnO1xuXG5cbnRlc3QoJ2ltYWdlIHByb2Nlc3NvciBzaW5nbGV0b24nLCAoKSA9PiB7XG4gIGNvbnN0IHAxID0gSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKTtcbiAgY29uc3QgcDIgPSBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpO1xuXG4gIGV4cGVjdChwMSkudG9CZShwMik7XG59KTtcblxudGVzdCgncHJvY2Vzc29yIHJlZ2lzdGVyJywgKCkgPT4ge1xuICBjbGFzcyBNeVJlc2l6ZUFjdGlvbiBleHRlbmRzIFJlc2l6ZUFjdGlvbiB7XG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWU6IHN0cmluZyA9ICdteS1yZXNpemUnO1xuICB9XG4gIGNvbnN0IHAgPSBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpO1xuICBjb25zdCByZXNpemVBY3Rpb24gPSBuZXcgTXlSZXNpemVBY3Rpb24oKTtcblxuICBwLnJlZ2lzdGVyKHJlc2l6ZUFjdGlvbik7XG5cbiAgZXhwZWN0KHJlc2l6ZUFjdGlvbi5uYW1lKS50b0JlKCdteS1yZXNpemUnKTtcbiAgZXhwZWN0KHAuYWN0aW9uKCdteS1yZXNpemUnKSA9PT0gcmVzaXplQWN0aW9uKS50b0JlVHJ1dGh5KCk7XG59KTtcblxudGVzdCgnaW1hZ2UgcHJvY2Vzc29yIHRlc3QnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGJzID0gbmV3IFNoYXJwQnVmZmVyU3RvcmUoc2hhcnAoe1xuICAgIGNyZWF0ZToge1xuICAgICAgd2lkdGg6IDUwLFxuICAgICAgaGVpZ2h0OiA1MCxcbiAgICAgIGNoYW5uZWxzOiAzLFxuICAgICAgYmFja2dyb3VuZDogeyByOiAyNTUsIGc6IDAsIGI6IDAgfSxcbiAgICB9LFxuICB9KS5wbmcoKSk7XG4gIGNvbnN0IGN0eCA9IGF3YWl0IG1rY3R4KCcnLCAnaW1hZ2UvcmVzaXplLHdfMTAwLGhfMTAwLG1fZml4ZWQsbGltaXRfMC8nLnNwbGl0KCcvJyksIGJzKTtcbiAgYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5wcm9jZXNzKGN0eCk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG5cbiAgZXhwZWN0KGluZm8ud2lkdGgpLnRvQmUoMTAwKTtcbiAgZXhwZWN0KGluZm8uaGVpZ2h0KS50b0JlKDEwMCk7XG59KTtcblxudGVzdCgnaW1hZ2UvY3JvcCx3XzEwMCxoXzEwMC9yb3VuZGVkLWNvcm5lcnMscl8xMC9mb3JtYXQscG5nJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUuanBnJywgJ2ltYWdlL2Nyb3Asd18xMDAsaF8xMDAvcm91bmRlZC1jb3JuZXJzLHJfMTAvZm9ybWF0LHBuZycuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5wcm9jZXNzKGN0eCk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG5cbiAgZXhwZWN0KGluZm8ud2lkdGgpLnRvQmUoMTAwKTtcbiAgZXhwZWN0KGluZm8uaGVpZ2h0KS50b0JlKDEwMCk7XG4gIGV4cGVjdChpbmZvLmNoYW5uZWxzKS50b0JlKDQpO1xufSk7XG5cbnRlc3QoJ2ltYWdlL3Jlc2l6ZSx3XzEwMC9yb3VuZGVkLWNvcm5lcnMscl8xMC9mb3JtYXQscG5nJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUuanBnJywgJ2ltYWdlL3Jlc2l6ZSx3XzEwMC9yb3VuZGVkLWNvcm5lcnMscl8xMC9mb3JtYXQscG5nJy5zcGxpdCgnLycpLCBmaXh0dXJlU3RvcmUpO1xuICBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgeyBpbmZvIH0gPSBhd2FpdCBjdHguaW1hZ2UudG9CdWZmZXIoeyByZXNvbHZlV2l0aE9iamVjdDogdHJ1ZSB9KTtcblxuICBleHBlY3QoaW5mby5jaGFubmVscykudG9CZSg0KTtcbn0pO1xuXG50ZXN0KCdpbWFnZS9yZXNpemUsd181MC9jcm9wLHdfMTAwLGhfMTAwL3JvdW5kZWQtY29ybmVycyxyXzEwMC9mb3JtYXQscG5nJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUuanBnJywgJ2ltYWdlL3Jlc2l6ZSx3XzUwL2Nyb3Asd18xMDAsaF8xMDAvcm91bmRlZC1jb3JuZXJzLHJfMTAwL2Zvcm1hdCxwbmcnLnNwbGl0KCcvJyksIGZpeHR1cmVTdG9yZSk7XG4gIGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkucHJvY2VzcyhjdHgpO1xuICBjb25zdCB7IGluZm8gfSA9IGF3YWl0IGN0eC5pbWFnZS50b0J1ZmZlcih7IHJlc29sdmVXaXRoT2JqZWN0OiB0cnVlIH0pO1xuXG4gIGV4cGVjdChpbmZvLndpZHRoKS50b0JlKDUwKTtcbiAgZXhwZWN0KGluZm8uaGVpZ2h0KS50b0JlKDMzKTtcbiAgZXhwZWN0KGluZm8uY2hhbm5lbHMpLnRvQmUoNCk7XG59KTtcblxudGVzdCgnZXhhbXBsZS5qcGc/eC1vc3MtcHJvY2Vzcz1pbWFnZS9yZXNpemUsd181MC90aHJlc2hvbGQsMTAnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGN0eCA9IGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkubmV3Q29udGV4dCgnZXhhbXBsZS5qcGcnLCAnaW1hZ2UvcmVzaXplLHdfNTAvdGhyZXNob2xkLDEwJy5zcGxpdCgnLycpLCBmaXh0dXJlU3RvcmUpO1xuICBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgeyBpbmZvIH0gPSBhd2FpdCBjdHguaW1hZ2UudG9CdWZmZXIoeyByZXNvbHZlV2l0aE9iamVjdDogdHJ1ZSB9KTtcblxuICBleHBlY3QoaW5mby53aWR0aCkudG9CZSg1MCk7XG4gIGV4cGVjdChpbmZvLmhlaWdodCkudG9CZSgzMyk7XG4gIGV4cGVjdChpbmZvLmNoYW5uZWxzKS50b0JlKDMpO1xufSk7XG5cbnRlc3QoJ2V4YW1wbGUuanBnP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLHdfNTAvdGhyZXNob2xkLDIzMDAwJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUuanBnJywgJ2ltYWdlL3Jlc2l6ZSx3XzUwL3RocmVzaG9sZCwyMzAwMCcuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5wcm9jZXNzKGN0eCk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG5cbiAgZXhwZWN0KGluZm8ud2lkdGgpLnRvQmUoNDAwKTtcbiAgZXhwZWN0KGluZm8uaGVpZ2h0KS50b0JlKDI2Nyk7XG4gIGV4cGVjdChpbmZvLmNoYW5uZWxzKS50b0JlKDMpO1xufSk7XG5cbnRlc3QoJ2ltYWdlL3Jlc2l6ZSx3XzIwL2luZGV4Y3JvcCx4XzUwLGlfMC8nLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGN0eCA9IGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkubmV3Q29udGV4dCgnZXhhbXBsZS5qcGcnLCAnaW1hZ2UvcmVzaXplLHdfMjAvaW5kZXhjcm9wLHhfNTAsaV8wLycuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5wcm9jZXNzKGN0eCk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG5cbiAgZXhwZWN0KGluZm8ud2lkdGgpLnRvQmUoMjApO1xufSk7XG5cbnRlc3QoJ2V4YW1wbGUuZ2lmP3gtb3NzLXByb2Nlc3M9aW1hZ2UvZm9ybWF0LGpwZycsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgY3R4ID0gYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5uZXdDb250ZXh0KCdleGFtcGxlLmdpZicsICdpbWFnZS9mb3JtYXQsanBnJy5zcGxpdCgnLycpLCBmaXh0dXJlU3RvcmUpO1xuICBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgeyBpbmZvIH0gPSBhd2FpdCBjdHguaW1hZ2UudG9CdWZmZXIoeyByZXNvbHZlV2l0aE9iamVjdDogdHJ1ZSB9KTtcblxuICBleHBlY3QoaW5mby53aWR0aCkudG9CZSg1MDApO1xuICBleHBlY3QoaW5mby5oZWlnaHQpLnRvQmUoMzAwKTtcbiAgZXhwZWN0KGluZm8uY2hhbm5lbHMpLnRvQmUoMyk7XG59KTtcblxudGVzdCgnZXhhbXBsZS5qcGc/eC1vc3MtcHJvY2Vzcz1pbWFnZS9yZXNpemUsd18yMDAvcm90YXRlLDkwJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUuanBnJywgJ2ltYWdlL3Jlc2l6ZSx3XzIwMC9yb3RhdGUsOTAnLnNwbGl0KCcvJyksIGZpeHR1cmVTdG9yZSk7XG4gIGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkucHJvY2VzcyhjdHgpO1xuICBjb25zdCB7IGluZm8gfSA9IGF3YWl0IGN0eC5pbWFnZS50b0J1ZmZlcih7IHJlc29sdmVXaXRoT2JqZWN0OiB0cnVlIH0pO1xuXG4gIGV4cGVjdChpbmZvLndpZHRoKS50b0JlKDEzNCk7XG4gIGV4cGVjdChpbmZvLmhlaWdodCkudG9CZSgyMDApO1xuICBleHBlY3QoaW5mby5jaGFubmVscykudG9CZSgzKTtcbn0pO1xuXG50ZXN0KCdleGFtcGxlLmdpZj94LW9zcy1wcm9jZXNzPWltYWdlL2Zvcm1hdCxwbmcnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGN0eCA9IGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkubmV3Q29udGV4dCgnZXhhbXBsZS5naWYnLCAnaW1hZ2UvZm9ybWF0LHBuZycuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5wcm9jZXNzKGN0eCk7XG4gIGNvbnN0IHsgaW5mbyB9ID0gYXdhaXQgY3R4LmltYWdlLnRvQnVmZmVyKHsgcmVzb2x2ZVdpdGhPYmplY3Q6IHRydWUgfSk7XG5cbiAgZXhwZWN0KGN0eC5mZWF0dXJlc1tGZWF0dXJlcy5SZWFkQWxsQW5pbWF0ZWRGcmFtZXNdKS50b0JlKGZhbHNlKTtcbiAgZXhwZWN0KGluZm8ud2lkdGgpLnRvQmUoNTAwKTtcbiAgZXhwZWN0KGluZm8uaGVpZ2h0KS50b0JlKDMwMCk7XG4gIGV4cGVjdChpbmZvLmZvcm1hdCkudG9CZSgncG5nJyk7XG59KTtcblxudGVzdCgnYXV0b3dlYnA6IGV4YW1wbGUuanBnJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUuanBnJywgW10sIGZpeHR1cmVTdG9yZSk7XG4gIGN0eC5mZWF0dXJlc1tGZWF0dXJlcy5BdXRvV2VicF0gPSB0cnVlO1xuICBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgeyBpbmZvIH0gPSBhd2FpdCBjdHguaW1hZ2UudG9CdWZmZXIoeyByZXNvbHZlV2l0aE9iamVjdDogdHJ1ZSB9KTtcblxuICBleHBlY3QoaW5mby5mb3JtYXQpLnRvQmUoJ3dlYnAnKTtcbn0pO1xuXG50ZXN0KCdhdXRvd2VicDogZXhhbXBsZS5qcGc/eC1vc3MtcHJvY2Vzcz1pbWFnZS9mb3JtYXQscG5nJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUuanBnJywgJ2ltYWdlL2Zvcm1hdCxwbmcnLnNwbGl0KCcvJyksIGZpeHR1cmVTdG9yZSk7XG4gIGN0eC5mZWF0dXJlc1tGZWF0dXJlcy5BdXRvV2VicF0gPSB0cnVlO1xuICBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgeyBpbmZvIH0gPSBhd2FpdCBjdHguaW1hZ2UudG9CdWZmZXIoeyByZXNvbHZlV2l0aE9iamVjdDogdHJ1ZSB9KTtcblxuICBleHBlY3QoaW5mby5mb3JtYXQpLnRvQmUoJ3BuZycpO1xufSk7XG5cbnRlc3Quc2tpcCgnZXhhbXBsZS5qcGc/eC1vc3MtcHJvY2Vzcz12aWRlby9zbmFwc2hvdCx0XzEsZl9qcGcsbV9mYXN0JywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBWaWRlb1Byb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUtdmlkZW8ubXA0JywgJ3ZpZGVvL3NuYXBzaG90LHRfMSxmX2pwZyxtX2Zhc3QnLnNwbGl0KCcvJyksIGZpeHR1cmVTdG9yZSk7XG4gIGNvbnN0IHsgZGF0YSwgdHlwZSB9ID0gYXdhaXQgVmlkZW9Qcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5wcm9jZXNzKGN0eCk7XG4gIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgc2hhcnAoZGF0YSkubWV0YWRhdGEoKTtcblxuICBleHBlY3QodHlwZSkudG9CZSgnaW1hZ2UvaW1hZ2UvanBlZycpO1xuICBleHBlY3QobWV0YWRhdGEuZm9ybWF0KS50b0JlKCdqcGVnJyk7XG59KTtcblxudGVzdCgnZXhhbXBsZS5qcGc/eC1vc3MtcHJvY2Vzcz1pbWFnZS9mYWtlL2luZm8nLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IG1vY2tWYWxpZGF0ZSA9IGplc3QuZm48e30sIGFueVtdPigpO1xuICBjb25zdCBtb2NrUHJvY2VzcyA9IGplc3QuZm48dm9pZCwgYW55W10+KCk7XG5cbiAgY2xhc3MgRmFrZUFjdGlvbiBleHRlbmRzIEJhc2VJbWFnZUFjdGlvbiB7XG4gICAgcHVibGljIG5hbWU6IHN0cmluZyA9ICdmYWtlJztcbiAgICB2YWxpZGF0ZShwYXJhbXM6IHN0cmluZ1tdKTogUmVhZE9ubHk8SUFjdGlvbk9wdHM+IHtcbiAgICAgIHJldHVybiBtb2NrVmFsaWRhdGUocGFyYW1zKTtcbiAgICB9XG4gICAgcHJvY2VzcyhjdHg6IElQcm9jZXNzQ29udGV4dCwgcGFyYW1zOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtb2NrUHJvY2VzcyhjdHgsIHBhcmFtcykpO1xuICAgIH1cbiAgfVxuXG4gIEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkucmVnaXN0ZXIobmV3IEZha2VBY3Rpb24oKSk7XG5cbiAgY29uc3QgY3R4ID0gYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5uZXdDb250ZXh0KCdleGFtcGxlLmpwZycsICdpbWFnZS9mYWtlL2luZm8nLnNwbGl0KCcvJyksIGZpeHR1cmVTdG9yZSk7XG4gIGNvbnN0IHsgZGF0YSwgdHlwZSB9ID0gYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5wcm9jZXNzKGN0eCk7XG5cbiAgZXhwZWN0KHR5cGUpLnRvQmUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgZXhwZWN0KGRhdGEpLnRvRXF1YWwoe1xuICAgIEZpbGVTaXplOiB7IHZhbHVlOiAnMjE4MzknIH0sXG4gICAgRm9ybWF0OiB7IHZhbHVlOiAnanBnJyB9LFxuICAgIEltYWdlSGVpZ2h0OiB7IHZhbHVlOiAnMjY3JyB9LFxuICAgIEltYWdlV2lkdGg6IHsgdmFsdWU6ICc0MDAnIH0sXG4gIH0pO1xuICBleHBlY3QobW9ja1Byb2Nlc3MpLm5vdC50b0JlQ2FsbGVkKCk7XG5cbn0pO1xuXG50ZXN0KCdzdHlsZSBwcm9jZXNzb3IgdGVzdCcsIGFzeW5jICgpID0+IHtcbiAgY29uc3Qgc3R5bGVTdG9yZSA9IG5ldyBNZW1LVlN0b3JlKHtcbiAgICBzdHlsZTE6IHsgaWQ6ICdzdHlsZTEnLCBzdHlsZTogJ2ltYWdlL3Jlc2l6ZSx3XzEwMCxoXzEwMCxtX2ZpeGVkLGxpbWl0XzAvJyB9LFxuICB9KTtcbiAgY29uc3QgcCA9IFN0eWxlUHJvY2Vzc29yLmdldEluc3RhbmNlKHN0eWxlU3RvcmUpO1xuICBjb25zdCBjdHggPSBhd2FpdCBwLm5ld0NvbnRleHQoJ2V4YW1wbGUuanBnJywgJ3N0eWxlL3N0eWxlMScuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBwLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBzaGFycChkYXRhKS5tZXRhZGF0YSgpO1xuXG4gIGV4cGVjdChtZXRhZGF0YS53aWR0aCkudG9CZSgxMDApO1xuICBleHBlY3QobWV0YWRhdGEuaGVpZ2h0KS50b0JlKDEwMCk7XG59KTtcblxudGVzdCgnc3R5bGUgcHJvY2Vzc29yIHRlc3QgaW52YWxpZCBzdHlsZSBuYW1lJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBicyA9IG5ldyBTaGFycEJ1ZmZlclN0b3JlKHNoYXJwKHtcbiAgICBjcmVhdGU6IHtcbiAgICAgIHdpZHRoOiA1MCxcbiAgICAgIGhlaWdodDogNTAsXG4gICAgICBjaGFubmVsczogMyxcbiAgICAgIGJhY2tncm91bmQ6IHsgcjogMjU1LCBnOiAwLCBiOiAwIH0sXG4gICAgfSxcbiAgfSkucG5nKCkpO1xuICBjb25zdCBjdHggPSBhd2FpdCBta2N0eCgnJywgJ3N0eWxlLyAjJCAnLnNwbGl0KCcvJyksIGJzKTtcbiAgY29uc3Qgc3R5bGVTdG9yZSA9IG5ldyBNZW1LVlN0b3JlKHtcbiAgICBzdHlsZTE6IHsgaWQ6ICdzdHlsZTEnLCBzdHlsZTogJ2ltYWdlL3Jlc2l6ZSx3XzEwMCxoXzEwMCxtX2ZpeGVkLGxpbWl0XzAvJyB9LFxuICB9KTtcbiAgdm9pZCBleHBlY3QoU3R5bGVQcm9jZXNzb3IuZ2V0SW5zdGFuY2Uoc3R5bGVTdG9yZSkucHJvY2VzcyhjdHgpKVxuICAgIC5yZWplY3RzLnRvVGhyb3dFcnJvcigvSW52YWxpZCBzdHlsZSBuYW1lLyk7XG59KTtcblxudGVzdCgnc3R5bGUgcHJvY2Vzc29yIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgYnMgPSBuZXcgU2hhcnBCdWZmZXJTdG9yZShzaGFycCh7XG4gICAgY3JlYXRlOiB7XG4gICAgICB3aWR0aDogNTAsXG4gICAgICBoZWlnaHQ6IDUwLFxuICAgICAgY2hhbm5lbHM6IDMsXG4gICAgICBiYWNrZ3JvdW5kOiB7IHI6IDI1NSwgZzogMCwgYjogMCB9LFxuICAgIH0sXG4gIH0pLnBuZygpKTtcbiAgY29uc3QgY3R4ID0gYXdhaXQgbWtjdHgoJycsICdzdHlsZS9ub3Rmb3VuZCcuc3BsaXQoJy8nKSwgYnMpO1xuICBjb25zdCBzdHlsZVN0b3JlID0gbmV3IE1lbUtWU3RvcmUoe1xuICAgIHN0eWxlMTogeyBpZDogJ3N0eWxlMScsIHN0eWxlOiAnaW1hZ2UvcmVzaXplLHdfMTAwLGhfMTAwLG1fZml4ZWQsbGltaXRfMC8nIH0sXG4gIH0pO1xuICB2b2lkIGV4cGVjdChTdHlsZVByb2Nlc3Nvci5nZXRJbnN0YW5jZShzdHlsZVN0b3JlKS5wcm9jZXNzKGN0eCkpXG4gICAgLnJlamVjdHMudG9UaHJvd0Vycm9yKC9TdHlsZSBub3QgZm91bmQvKTtcbn0pO1xuXG50ZXN0KCdmLmpwZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMC8nLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGN0eCA9IGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkubmV3Q29udGV4dCgnZi5qcGcnLCAnaW1hZ2UvcmVzaXplLHdfMTAwLycuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgY29uc3QgeyBkYXRhLCB0eXBlIH0gPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBzaGFycChkYXRhKS5tZXRhZGF0YSgpO1xuXG4gIGV4cGVjdCh0eXBlKS50b0JlKCdpbWFnZS9qcGVnJyk7XG4gIGV4cGVjdChtZXRhZGF0YS53aWR0aCkudG9CZSgxMDApO1xuICBleHBlY3QobWV0YWRhdGEuaGVpZ2h0KS50b0JlKDEyNyk7XG59KTtcblxudGVzdCgnZi5qcGc/eC1vc3MtcHJvY2Vzcz1pbWFnZS9yZXNpemUsd18xMDAvYXV0by1vcmllbnQsMCcsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgY3R4ID0gYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5uZXdDb250ZXh0KCdmLmpwZycsICdpbWFnZS9yZXNpemUsd18xMDAvYXV0by1vcmllbnQsMCcuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgY29uc3QgeyBkYXRhLCB0eXBlIH0gPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBzaGFycChkYXRhKS5tZXRhZGF0YSgpO1xuXG4gIGV4cGVjdCh0eXBlKS50b0JlKCdpbWFnZS9qcGVnJyk7XG4gIGV4cGVjdChtZXRhZGF0YS53aWR0aCkudG9CZSgxMDApO1xuICBleHBlY3QobWV0YWRhdGEuaGVpZ2h0KS50b0JlKDc4KTtcbiAgZXhwZWN0KGN0eC5oZWFkZXJzWydMYXN0LU1vZGlmaWVkJ10pLnRvQmUoJ1dlZCwgMjEgT2N0IDIwMTQgMDc6Mjg6MDAgR01UJyk7XG59KTtcblxudGVzdCgnZi5qcGc/eC1vc3MtcHJvY2Vzcz1pbWFnZS9zdHJpcC1tZXRhZGF0YScsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgY3R4ID0gYXdhaXQgSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKS5uZXdDb250ZXh0KCdmLmpwZycsICdpbWFnZS9zdHJpcC1tZXRhZGF0YScuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBzaGFycChkYXRhKS5tZXRhZGF0YSgpO1xuXG4gIGV4cGVjdChjdHgubWV0YWRhdGEuZXhpZikubm90LnRvQmVVbmRlZmluZWQoKTtcbiAgZXhwZWN0KG1ldGFkYXRhLmV4aWYpLnRvQmVVbmRlZmluZWQoKTtcbn0pO1xuXG50ZXN0KCdmLmpwZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMC9hdXRvLW9yaWVudCwxJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2YuanBnJywgJ2ltYWdlL3Jlc2l6ZSx3XzEwMC9hdXRvLW9yaWVudCwxJy5zcGxpdCgnLycpLCBmaXh0dXJlU3RvcmUpO1xuICBjb25zdCB7IGRhdGEsIHR5cGUgfSA9IGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkucHJvY2VzcyhjdHgpO1xuICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHNoYXJwKGRhdGEpLm1ldGFkYXRhKCk7XG5cbiAgZXhwZWN0KHR5cGUpLnRvQmUoJ2ltYWdlL2pwZWcnKTtcbiAgZXhwZWN0KG1ldGFkYXRhLndpZHRoKS50b0JlKDEwMCk7XG4gIGV4cGVjdChtZXRhZGF0YS5oZWlnaHQpLnRvQmUoMTI4KTtcbn0pO1xuXG50ZXN0KCdleGFtcGxlLmdpZj94LW9zcy1wcm9jZXNzPWltYWdlL2NnaWYsc18yJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdHggPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLm5ld0NvbnRleHQoJ2V4YW1wbGUuZ2lmJywgJ2ltYWdlL2NnaWYsc18yJy5zcGxpdCgnLycpLCBmaXh0dXJlU3RvcmUpO1xuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkucHJvY2VzcyhjdHgpO1xuICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHNoYXJwKGRhdGEpLm1ldGFkYXRhKCk7XG4gIGV4cGVjdChtZXRhZGF0YS5wYWdlcykudG9CZSgyKTtcbn0pO1xuXG50ZXN0KCdleGFtcGxlLmdpZj94LW9zcy1wcm9jZXNzPWltYWdlL2NnaWYsc18xMDAnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGN0eCA9IGF3YWl0IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCkubmV3Q29udGV4dCgnZXhhbXBsZS5naWYnLCAnaW1hZ2UvY2dpZixzXzEwMCcuc3BsaXQoJy8nKSwgZml4dHVyZVN0b3JlKTtcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBJbWFnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpLnByb2Nlc3MoY3R4KTtcbiAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBzaGFycChkYXRhKS5tZXRhZGF0YSgpO1xuICBleHBlY3QobWV0YWRhdGEucGFnZXMpLnRvQmUoMyk7XG59KTsiXX0=